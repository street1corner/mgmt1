<div class="content-header">
	<h2 class="content-title">设备维护记录</h2>
	<span class="layui-breadcrumb" style="visibility: visible;">
	  <a href="#!home">总经办运维</a>
	  <span lay-separator>/</span>
	  <a><cite>设备维护记录</cite></a>
	</span>
</div>
<div>
	<div class="layui-form toolbar">
		搜索：
		<select id="searchKey" ng-model="eqpMaintain.searchkey">
			<option value="">-请选择-</option>
			<option value="eqp_name">设备名称</option>
			<option value="eqp_number">设备编号</option>
			<option value="maintain_person">维护人员</option>
		</select>&emsp;
		<input id="searchValue" class="layui-input search-input" type="text" placeholder="输入搜索内容" ng-model="eqpMaintain.searchValue"/>&emsp;
		<button id="searchBtn" class="layui-btn search-btn" ng-click="doSearch()"><i class="layui-icon">&#xe615;</i>搜索</button>&emsp;
		<button id="addBtn" class="layui-btn search-btn"><i class="layui-icon">&#xe654;</i>添加</button>
	</div>
	<table id="eqpMaintaintable" lay-filter="eqpMaintain"></table>
</div>

<!-- 表格操作列 -->
<script type="text/html" id="barTpl">
  <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="edit">编辑</a>
  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
<!-- 状态开关 -->
<script type="text/html" id="switchTpl">
  <input type="checkbox" name="switch" value="{{d.id}}" lay-skin="switch" lay-text="解决|未解决" lay-filter="statusDemo" {{ d.status == 1 ? 'checked' : '' }}>
</script>
<!-- 有无镜像状态显示 -->
<script type="text/html" id="haveMirrorswitchTpl">
  	{{#  if(d.haveMirror === 1){ }}
    	<span style="color: green;">有</span>
  	{{#  } else { }}
    	<span style="color: red;">无</span>
 	{{#  } }}	
</script>
<!-- 表单弹窗 -->
<script type="text/ng-template" id="addModel">
	<h6>带<span style="color:red">*</span>为必填项</h6>
	<form id="editForm" class="layui-form model-form" action="">
		<input name="userId" type="hidden" />
		<div class="main">
		<div class="main-left">
		<div class="layui-form-item">
			<label class="layui-form-label"><span style="color:red">*</span>设备名称</label>
 			<div class="layui-input-block">
				<select name="eqpName" id="eqpName" lay-filter="eqpNamefilter" lay-verify="required" lay-search="">
        			
      			</select>
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label"><span style="color:red">*</span>设备编号</label>
 			<div class="layui-input-block">
				<input name="eqpNumber" placeholder="自动显示" type="text" class="layui-input" disabled/>
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label"><span style="color:red">*</span>故障时间</label>
 			<div class="layui-input-block">
				<input name="breakdownTime" id="breakdownTime" placeholder="请输入故障时间" type="text" class="layui-input" lay-verify="required"/>
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label"><span style="color:red">*</span>故障描述</label>
 			<div class="layui-input-block">
				<input name="breakdownDesc" placeholder="请输入简明描述" type="text" class="layui-input" lay-verify="required"/>
			</div>
		</div>
        <div class="layui-form-item layui-form-text">
            <label for="installedSoft" class="layui-form-label">交付资料</label>
            <div class="layui-input-block">
               <textarea placeholder="请输入交付资料...." id="relativeData"  name="relativeData" autocomplete="off" class="layui-textarea"></textarea>
            </div>
        </div>		
		</div>

		<div class="main-right">
		<div class="layui-form-item">
			<label class="layui-form-label"><span style="color:red">*</span>状态</label>
 			<div class="layui-input-block">
				<select name="status" id="status" lay-verify="required">
        			
      			</select>
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label"><span style="color:red">*</span>解决时间</label>
 			<div class="layui-input-block">
				<input name="solutionTime" id="solutionTime" placeholder="请输入解决时间" type="text" class="layui-input" lay-verify="required"/>
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label"><span style="color:red">*</span>维护人员</label>
 			<div class="layui-input-block">
				<input name="maintainPerson" placeholder="请输入维护人员" type="text" class="layui-input" lay-verify="required" required />
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label"><span style="color:red">*</span>是否有镜像</label>
 			<div class="layui-input-block">
				<select name="haveMirror" id="haveMirror" lay-verify="required">

      			</select>
			</div>
		</div>
        <div class="layui-form-item layui-form-text">
            <label for="installedSoft" class="layui-form-label">备注</label>
            <div class="layui-input-block">
               <textarea placeholder="好记性不如烂笔头...." id="remark"  name="remark" autocomplete="off" class="layui-textarea"></textarea>
            </div>
        </div>
		</div>

		</div>

		<div class="layui-form-item model-form-footer">
			<button class="layui-btn layui-btn-primary" type="button" id="btnCancel">取消</button>
			<button class="layui-btn" lay-filter="btnSubmit" lay-submit>保存</button>
		</div>
	</form>
</script>
<script id="selectOption" type="text/html">
<option value="">-请选择-</option>
{{#  layui.each(d, function(index, item){ }}
<option value="{{ item.code }}">{{ item.haveMirror }}</option>
{{#  }); }}
</script>
<script id="selectOptionStatus" type="text/html">
<option value="">-请选择-</option>
{{#  layui.each(d, function(index, item){ }}
<option value="{{ item.code }}">{{ item.state }}</option>
{{#  }); }}
</script>
<script id="selectOptionEQPName" type="text/html">
<option value="">-请选择-</option>
{{#  layui.each(d, function(index, item){ }}
<option value="{{ item.eqpName }}">{{ item.eqpName }}</option>
{{#  }); }}
</script>